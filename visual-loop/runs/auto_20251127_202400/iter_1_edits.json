{"file":"src/core/services/AIService.ts","search":"export interface AIDecision {\n  abilityId: string;\n  targetIds: readonly string[];\n}\n\n/**\n * Score an ability for use by an enemy unit\n * Higher score = better choice\n */\nfunction scoreAbility(\n  ability: Ability,\n  caster: Unit,\n  state: BattleState\n","replace":"export interface AIDecision {\n  abilityId: string;\n  targetIds: readonly string[];\n}\n\n/**\n * Selects the living unit with the lowest HP percentage.\n * Returns null if no valid units remain.\n */\nexport function selectLowHPTarget(units: readonly Unit[]): Unit | null {\n  const livingUnits = units.filter(unit => !isUnitKO(unit));\n  if (livingUnits.length === 0) {\n    return null;\n  }\n\n  return livingUnits.reduce((lowest, unit) => {\n    const lowestHpPct = lowest.currentHp / calculateMaxHp(lowest);\n    const unitHpPct = unit.currentHp / calculateMaxHp(unit);\n    return unitHpPct < lowestHpPct ? unit : lowest;\n  }, livingUnits[0]!);\n}\n\n/**\n * Score an ability for use by an enemy unit\n * Higher score = better choice\n */\nfunction scoreAbility(\n  ability: Ability,\n  caster: Unit,\n  state: BattleState\n"}
