# Repository Guidelines

## Project Structure & Module Organization
- `visual-loop/`: autonomous visual dev loop; entry points `auto.sh`, `orchestrate.sh`, `snap.sh`, `analyze.sh`, tasks in `task_list.json`, run artifacts under `runs/`.
- `architect/`: two-agent design sessions (`architect.sh`, `thinking-framework.txt`, optional `config.env` overrides).
- `debate/`: adversarial debates via `debate.sh` and `debate-framework.txt`.
- `autopilot/`: user/developer simulation (`autopilot.sh`, `config.env`).
- `guardian/`: content auditor (`guardian.sh`, `guardian-framework.txt`).
- `knowledge/`: `learnings.md` knowledge base plus `sessions/` transcripts generated by `learn.sh`; root docs (`CLAUDE.md`, `PEER_REVIEW_SYNTHESIS.md`, `SESSION_SUMMARY.md`) give extra context.

## Build, Test, and Development Commands
- `cd visual-loop && ./auto.sh "Change CTA color" --context-files "Header.tsx,Header.css" --no-stash` runs the edit → verify loop (override `PROJECT_DIR`, `DEV_CMD`, `URL` as needed).
- `cd visual-loop && ./orchestrate.sh --dry-run` previews tasks from `task_list.json`; drop `--dry-run` to execute.
- `./learn.sh "Should we debounce searches?"` runs `architect` headless and appends insights to `knowledge/learnings.md`.
- `cd architect && ./architect.sh --headless "Pick a state library"` or `cd debate && ./debate.sh "Should AI have rights?"` for quick checks.
- `cd autopilot && ./autopilot.sh --headless "Add dark mode"` simulates user ↔ dev; `./guardian/guardian.sh --audit "text"` audits a single output.

## Coding Style & Naming Conventions
- Bash-first code: start with `#!/usr/bin/env bash` and `set -euo pipefail` (or `set -e` where stricter checks are not desired).
- Keep env/config variables `UPPER_SNAKE_CASE`; functions and locals `lower_snake_case`; indent with 4 spaces; prefer `[[ ... ]]` and quoted variables.
- Centralize defaults in `config.env` per module; keep prompts/frameworks in text files; log paths under `~/.cache/<tool>` or `visual-loop/runs/`.

## Testing Guidelines
- No automated test suite; sanity-check CLI changes by running `script.sh --help` plus one headless/sample invocation.
- For visual-loop changes, run a short `auto.sh` task with `--expect` or `--verify-code` to confirm detection paths; avoid committing bulky artifacts under `visual-loop/runs/`.
- If you touch shell logic, run `shellcheck <file>` when available and ensure temporary directories are cleaned up.

## Commit & Pull Request Guidelines
- Commits should be small, imperative, and scoped (e.g., `Tighten guardian audit output`); call out config or dependency changes in the subject when relevant.
- PRs: note what changed, commands executed, and any local overrides (`PROJECT_DIR`, `DEV_CMD`, `URL`, AI command tweaks). Attach relevant logs or screenshots for visual-loop/guardian runs; link issues if applicable.
- Keep defaults safe for others (do not check in secrets or local paths); prefer documenting required env vars over hard-coding.
